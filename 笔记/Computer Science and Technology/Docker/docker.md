# 1	æ¦‚è¿°



---

<br>

## 1.2	å®‰è£… Docker

### 1.2.1	åœ¨ Linux ç¯å¢ƒä¸‹å®‰è£… Docker

ä½¿ç”¨å®˜æ–¹å®‰è£…è„šæœ¬è‡ªåŠ¨å®‰è£…ï¼š

```shell
curl -fsSL https://get.docker.com | bash -s docker --mirror Aliyun
```

---

<br>

# 2	åŸºæœ¬å‘½ä»¤

## 2.1	å¯åŠ¨å’Œå…³é—­docker

**å¯åŠ¨ docker å‘½ä»¤ï¼š**

```shell
systemctl start docker
```

**å…³é—­ dockerï¼š**

```shell
systemctl stop docker
```

**é‡æ–°å¯åŠ¨ dockerï¼š**

```shell
service docker restart
```

**è®¾ç½® docker å¼€æœºè‡ªå¯åŠ¨ï¼š**

```shell
systemctl enable docker
```

---

<br>

## 2.2	                      

æŸ¥çœ‹dockerçš„ç‰ˆæœ¬ä¿¡æ¯

```shell
docker version
```

æŸ¥çœ‹Dockerçš„ç³»ç»Ÿä¿¡æ¯

```shell
docker info 
```

---

<br>

## 2.3	é•œåƒå‘½ä»¤

**æŸ¥çœ‹æ‰€æœ‰å·²å®‰è£…çš„é•œåƒï¼š**

```shell
docker images

docker images -a			#åˆ—å‡ºæœ¬åœ°æ‰€æœ‰çš„é•œåƒ
docker images -p			#åªæ˜¾ç¤ºé•œåƒID
docker images --digests		#æ˜¾ç¤ºé•œåƒçš„æ‘˜è¦ä¿¡æ¯
docker images --no-trunc	#æ˜¾ç¤ºå®Œæ•´çš„é•œåƒä¿¡æ¯
```

**ä» Docker Hub ä¸ŠæŸ¥æ‰¾é•œåƒï¼š**

```shell
docker search [é•œåƒå]
```

**æ‹‰å–é•œåƒï¼š**

```shell
docker pull [é•œåƒå]

//é€šè¿‡ tag æŒ‡å®šæ‹‰å–é•œåƒçš„ç‰ˆæœ¬ï¼Œå¯ä»¥é€šè¿‡ last æŒ‡å®šä¸ºå½“å‰æœ€æ–°ç‰ˆæœ¬
docker pull [é•œåƒå]:tag
```

**åˆ é™¤é•œåƒï¼š**

```shell
docker rmi hello-world				ä»Dockerä¸­åˆ é™¤hello-worldé•œåƒ
docker rmi -f hello-world			ä»Dockerä¸­å¼ºåˆ¶åˆ é™¤hello-worldé•œåƒ
docker rmi -f hello-world nginx		ä»Dockerä¸­å¼ºåˆ¶åˆ é™¤hello-worldé•œåƒå’Œnginxé•œåƒ
```

---

<br>

## 2.4	å®¹å™¨å‘½ä»¤

### 2.4.1	æŸ¥çœ‹å®¹å™¨ä¿¡æ¯

**æŸ¥çœ‹è¿è¡Œä¸­çš„å®¹å™¨ï¼š**

```shell
docker ps
```

æŸ¥çœ‹æ‰€æœ‰å®¹å™¨ä¿¡æ¯ï¼ŒåŒ…æ‹¬æœªè¿è¡Œçš„å®¹å™¨

```shell
docker ps -a
```

---

<br>

### 2.4.2	è¿è¡Œå®¹å™¨

**è¿è¡Œå®¹å™¨ï¼š**

```
docker run [OPTIONS] IMAGE [COMMAND] [ARG...]
```

##### docker å‚æ•°åˆ—è¡¨

| å‚æ•° | è¯´æ˜                                               |
| ---- | -------------------------------------------------- |
| `-i` | ä»¥äº¤äº’æ¨¡å¼è¿è¡Œå®¹å™¨ï¼Œé€šå¸¸ä¸ -t åŒæ—¶ä½¿ç”¨ï¼›           |
| `-t` | ä¸ºå®¹å™¨é‡æ–°åˆ†é…ä¸€ä¸ªä¼ªè¾“å…¥ç»ˆç«¯ï¼Œé€šå¸¸ä¸ -i åŒæ—¶ä½¿ç”¨ï¼› |
| -p   | æŒ‡å®šç«¯å£æ˜ å°„ï¼Œæ ¼å¼ä¸ºï¼šä¸»æœº(å®¿ä¸»)ç«¯å£:å®¹å™¨ç«¯å£      |

-a stdin: æŒ‡å®šæ ‡å‡†è¾“å…¥è¾“å‡ºå†…å®¹ç±»å‹ï¼Œå¯é€‰ STDIN/STDOUT/STDERR ä¸‰é¡¹ï¼›

-d: åå°è¿è¡Œå®¹å™¨ï¼Œå¹¶è¿”å›å®¹å™¨IDï¼›

-P: éšæœºç«¯å£æ˜ å°„ï¼Œå®¹å™¨å†…éƒ¨ç«¯å£éšæœºæ˜ å°„åˆ°ä¸»æœºçš„ç«¯å£

--name="nginx-lb": ä¸ºå®¹å™¨æŒ‡å®šä¸€ä¸ªåç§°ï¼›

--dns 8.8.8.8: æŒ‡å®šå®¹å™¨ä½¿ç”¨çš„DNSæœåŠ¡å™¨ï¼Œé»˜è®¤å’Œå®¿ä¸»ä¸€è‡´ï¼›

--dns-search example.com: æŒ‡å®šå®¹å™¨DNSæœç´¢åŸŸåï¼Œé»˜è®¤å’Œå®¿ä¸»ä¸€è‡´ï¼›

-h "mars": æŒ‡å®šå®¹å™¨çš„hostnameï¼›

-e username="ritchie": è®¾ç½®ç¯å¢ƒå˜é‡ï¼›

--env-file=[]: ä»æŒ‡å®šæ–‡ä»¶è¯»å…¥ç¯å¢ƒå˜é‡ï¼›

--cpuset="0-2" or --cpuset="0,1,2": ç»‘å®šå®¹å™¨åˆ°æŒ‡å®šCPUè¿è¡Œï¼›

-m :è®¾ç½®å®¹å™¨ä½¿ç”¨å†…å­˜æœ€å¤§å€¼ï¼›

--net="bridge": æŒ‡å®šå®¹å™¨çš„ç½‘ç»œè¿æ¥ç±»å‹ï¼Œæ”¯æŒ bridge/host/none/container: å››ç§ç±»å‹ï¼›

--link=[]: æ·»åŠ é“¾æ¥åˆ°å¦ä¸€ä¸ªå®¹å™¨ï¼›

--expose=[]: å¼€æ”¾ä¸€ä¸ªç«¯å£æˆ–ä¸€ç»„ç«¯å£ï¼›

--volume , -v: ç»‘å®šä¸€ä¸ªå·

---

<br>

### 2.4.3	å®¹å™¨æ“ä½œ

##### å…³é—­å®¹å™¨ï¼š

```shell
docker stop [å®¹å™¨ID/å®¹å™¨å]
```

##### å¼ºåˆ¶å…³é—­å®¹å™¨

```shell
docker kill [å®¹å™¨ID/å®¹å™¨å]
```

##### å¯åŠ¨å®¹å™¨

```shell
docker start [å®¹å™¨ID/å®¹å™¨å]
```

- å»ºè®®ä½¿ç”¨å®¹å™¨IDï¼Œå®¹å™¨IDæ”¯æŒæ¨¡ç³ŠæŸ¥è¯¢è€Œå®¹å™¨åç§°ä¸æ”¯æŒ

##### é‡å¯å®¹å™¨

```shell
docker restart [å®¹å™¨ID/å®¹å™¨å]
```

##### è®¾ç½®å®¹å™¨è‡ªåŠ¨å¯åŠ¨

- å¯¹äºæœªè¿è¡Œè¿‡çš„å®¹å™¨ï¼Œå¯ä»¥åœ¨å¯åŠ¨æ—¶æ·»åŠ å‚æ•° `--restart=always`ã€‚

- å¯¹äºå·²ç»è¿è¡Œè¿‡çš„å®¹å™¨ï¼Œä½¿ç”¨ docker update å‘½ä»¤ï¼š

  ```shell
  docker update --restart=always [å®¹å™¨ID/å®¹å™¨å]
  ```

##### åˆ é™¤å®¹å™¨

```shell
docker rm [å®¹å™¨ID/å®¹å™¨å]
```

---

<br>

# 3	å…·ä½“æ“ä½œ

## 3.1	é…ç½® Mysql å®¹å™¨

##### åŸºæœ¬å‘½ä»¤

```php
docker run -itd --name [è‡ªå®šä¹‰çš„å®¹å™¨åç§°] -p 3306:3306 -e MYSQL_ROOT_PASSWORD=PASSWORDis1024 [é•œåƒåç§°]
```

##### ä½¿ç”¨ -v å‚æ•°é…ç½® Mysql å®¹å™¨

- é€šè¿‡æ˜ å°„æœ¬åœ°ç›®å½•åˆ°å®¹å™¨å°† MySQL æ•°æ®å­˜å‚¨åœ¨æœ¬åœ°ç›®å½•ï¼Œä¾‹ï¼š

  ```shell
  $ docker run -d -e MYSQL_ROOT_PASSWORD=admin --name mysql -v /data/mysql/data:/var/lib/mysql -p 3306:3306 mysql 
  ```

- æŒ‡å®š Mysql é…ç½®æ–‡ä»¶ï¼Œä¾‹ï¼š

  ```shell
  docker run -d -e MYSQL_ROOT_PASSWORD=admin --name mysql -v /data/mysql/my.cnf:/etc/mysql/my.cnf -v /data/mysql/data:/var/lib/mysql -p 3306:3306 mysql 
  ```

- ğŸ“Œ**æ³¨æ„**ï¼š

  - -v å‚æ•°å¯ä»¥å¤šæ¬¡ä½¿ç”¨ï¼Œæ¯æ¬¡æ˜ å°„ä¸€ä¸ªç›®å½•

##### ğŸ“Œé€šç”¨ Mysql å®¹å™¨é…ç½®å‘½ä»¤

```shell
docker run -itd \
--name mysqlcontainer1	\ #è®¾ç½®å®¹å™¨å
-p 3306:3306	\ #è®¾ç½®å®¹å™¨ç«¯å£
-e MYSQL_ROOT_PASSWORD=PASSWORDis1024	\ #è®¾ç½® root ç”¨æˆ·å¯†ç 
centos/mysql-57-centos7	\ #ä½¿ç”¨çš„é•œåƒ
```



---

<br>

## 3.2	é…ç½® SQL Server å®¹å™¨

**å‚è€ƒï¼š**

- [åœ¨ docker ç¯å¢ƒä¸‹å®‰è£… sqlserver 2017](https://docs.microsoft.com/zh-cn/sql/linux/quickstart-install-connect-docker?view=sql-server-2017&preserve-view=true&pivots=cs1-bash)

**æ‹‰å– Sql Server 2017é•œåƒï¼š**

```shell
docker pull mcr.microsoft.com/mssql/server:2017-latest
```

**ä½¿ç”¨ docker è¿è¡Œ å®¹å™¨é•œåƒ:**

```shell
docker run -e "ACCEPT_EULA=Y" -e "SA_PASSWORD=<YourStrong@Passw0rd>" \
   -p 1433:1433 --name sql1 -h sql1 \
   -d \
   mcr.microsoft.com/mssql/server:2017-latest
```

- å¯†ç åº”ç¬¦åˆ SQL Server é»˜è®¤å¯†ç ç­–ç•¥ï¼Œå¦åˆ™å®¹å™¨æ— æ³•è®¾ç½® SQL Serverï¼Œå°†åœæ­¢å·¥ä½œã€‚ é»˜è®¤æƒ…å†µä¸‹ï¼Œå¯†ç çš„é•¿åº¦å¿…é¡»è‡³å°‘ä¸º 8 ä¸ªå­—ç¬¦ï¼Œå¹¶ä¸”å¿…é¡»åŒ…å«ä»¥ä¸‹å››ç§å­—ç¬¦ä¸­çš„ä¸‰ç§ï¼šå¤§å†™å­—æ¯ã€å°å†™å­—æ¯ã€åè¿›åˆ¶æ•°å­—å’Œç¬¦å·ã€‚ ä½ å¯ä»¥é€šè¿‡æ‰§è¡Œ docker logs å‘½ä»¤æ£€æŸ¥é”™è¯¯æ—¥å¿—ã€‚

- docker run å‚æ•°è¯´æ˜ï¼š

  | å‚æ•°                                           | è¯´æ˜                                                         |
  | :--------------------------------------------- | :----------------------------------------------------------- |
  | **-e "ACCEPT_EULA=Y"**                         | å°† **ACCEPT_EULA** å˜é‡è®¾ç½®ä¸ºä»»æ„å€¼ï¼Œä»¥ç¡®è®¤æ¥å— [æœ€ç»ˆç”¨æˆ·è®¸å¯åè®®](https://go.microsoft.com/fwlink/?linkid=857698)ã€‚ SQL Server æ˜ åƒçš„å¿…éœ€è®¾ç½®ã€‚ |
  | -e "SA_PASSWORD=<YourStrong@Passw0rd>"         | æŒ‡å®šè‡³å°‘åŒ…å« 8 ä¸ªå­—ç¬¦ä¸”ç¬¦åˆ [SQL Server å¯†ç è¦æ±‚](https://docs.microsoft.com/zh-cn/sql/relational-databases/security/password-policy?view=sql-server-2017)çš„å¼ºå¯†ç ã€‚ SQL Server æ˜ åƒçš„å¿…éœ€è®¾ç½®ã€‚ |
  | **-p 1433:1433**                               | å°†ä¸»æœºç¯å¢ƒä¸­çš„ TCP ç«¯å£ï¼ˆç¬¬ä¸€ä¸ªå€¼ï¼‰æ˜ å°„åˆ°å®¹å™¨ä¸­çš„ TCP ç«¯å£ï¼ˆç¬¬äºŒä¸ªå€¼ï¼‰ã€‚ åœ¨æ­¤ç¤ºä¾‹ä¸­ï¼ŒSQL Server ä¾¦å¬å®¹å™¨ä¸­çš„ TCP 1433ï¼Œå¹¶å¯¹ä¸»æœºä¸Šçš„ç«¯å£ 1433 å…¬å¼€ã€‚ |
  | **--name sql1**                                | ä¸ºå®¹å™¨æŒ‡å®šä¸€ä¸ªè‡ªå®šä¹‰åç§°ï¼Œè€Œä¸æ˜¯ä½¿ç”¨éšæœºç”Ÿæˆçš„åç§°ã€‚ å¦‚æœè¿è¡Œå¤šä¸ªå®¹å™¨ï¼Œåˆ™æ— æ³•é‡å¤ä½¿ç”¨ç›¸åŒçš„åç§°ã€‚ |
  | -h sql1                                        | ç”¨äºæ˜¾å¼è®¾ç½®å®¹å™¨ä¸»æœºåï¼Œå¦‚æœä¸æŒ‡å®šå®ƒï¼Œåˆ™é»˜è®¤ä¸ºå®¹å™¨ IDï¼Œè¯¥ ID æ˜¯éšæœºç”Ÿæˆçš„ç³»ç»Ÿ GUIDã€‚ |
  | **-d**                                         | åœ¨åå°è¿è¡Œå®¹å™¨ï¼ˆå®ˆæŠ¤ç¨‹åºï¼‰                                   |
  | **mcr.microsoft.com/mssql/server:2017-latest** | SQL Server 2017 Linux å®¹å™¨æ˜ åƒã€‚                             |

**æ³¨æ„ï¼š**

- åœ¨ docker ä¸Šåˆ›å»ºçš„æ•°æ®åº“å®¹å™¨åœ¨è¢«åˆ é™¤ä¹‹åï¼Œæœ‰å¯èƒ½ä¼šå¯¼è‡´æ•°æ®åº“ä¸­çš„æ‰€æœ‰æ•°æ® **å…¨éƒ¨ä¸¢å¤±**ï¼Œä½†æ˜¯å¯ä»¥é€šè¿‡å‚æ•°æŒ‡å®šæ•°æ®åº“æ–‡ä»¶åœ¨ç¡¬ç›˜ä¸Šçš„ä¿å­˜ä½ç½®ï¼æ ¹æ® Docker å®˜æ–¹å®¹å™¨ä½¿ç”¨æŠ€å·§ï¼Œä¸è¦å°†æ•°æ®å­˜å‚¨åœ¨ docker ä¸­ï¼

---

<br>

# é™„å½•

##### æœ€åç¼–è¾‘æ—¶é—´

- 2021/03/06

##### ç¯å¢ƒ

- centOS 7.3
- docker  20.10.3

##### å‚è€ƒ

- [docker æ•™æ|èœé¸Ÿæ•™ç¨‹](https://www.runoob.com/docker/docker-tutorial.html)

##### ç›¸å…³èµ„æ–™

- 

##### è„šæ³¨

[^xxx]: 

##### ä»£ç é“¾æ¥

[1]:

##### é”šç‚¹

[](#1) 

##### è´¨ç–‘

[^!1]: 

##### ç–‘é—®

[^?1]: 
