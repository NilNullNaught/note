# 1	概述

## 1.1	服务架构的演变

##### 单体架构

将业务的所有功能集中在一个项目中开发，打成一个包部署。

![单体架构示意图](img/image-20210713202807818.png)

###### 优点

- 架构简单
- 部署成本低

###### 缺点

- 耦合度高（维护困难、升级困难）

###### 适用场景

适合小型项目。

<br>

##### 分布式架构

根据业务功能对系统做拆分，每个业务功能模块作为独立项目开发，称为一个服务。

![image-20210713203124797](img/image-20210713203124797.png)

###### 优点

- 降低服务耦合
- 有利于服务升级和拓展

###### 缺点

- 服务调用关系错综复杂

###### 适用场景

适合大型互联网项目。

###### 分布式架构存在的问题

分布式架构虽然降低了服务耦合，但是服务拆分时也有很多问题需要思考：

- 服务拆分的粒度如何界定？
- 服务之间如何调用？
- 服务的调用关系如何管理？

为此，人们需要制定一套行之有效的标准来约束分布式架构。

<br>

---

<div STYLE="page-break-after: always;">
    <br>
    <br>
    <br>
    <br>
    <br>
</div>
## 1.2	微服务架构

![image-20210713203753373](img/image-20210713203753373.png)

##### 微服务架构的特征

- **单一职责**：微服务拆分粒度更小，每一个服务都对应唯一的业务能力，做到单一职责。
- **自治**：团队独立、技术独立、数据独立，独立部署和交付。
- **面向服务**：服务提供统一标准的接口，与语言和技术无关。
- **隔离性强**：服务调用做好隔离、容错、降级，避免出现级联问题。

<br>

##### 微服务架构的本质

微服务的上述特性其实是在 **给分布式架构制定一个标准，进一步降低服务之间的耦合度，提供服务的独立性和灵活性。做到高内聚，低耦合**。因此，可以认为 **微服务** 是一种经过良好架构设计的 **分布式架构方案** 。

<br>

##### 优缺点

- **优点**：与一般的分布式架构相比拆分粒度更小、服务更独立、耦合度更低。
- **缺点**：架构非常复杂，运维、监控、部署难度提高。

<br>

----

<div STYLE="page-break-after: always;">
    <br>
    <br>
    <br>
    <br>
    <br>
</div>
## 1.3	微服务技术栈与 Spring Cloud

##### 完整的微服务技术栈示意图

<img src="img/image-20210906012903400.png" alt="image-20210906012903400" style="zoom:50%;" />

<img src="img/image-20210906012650334.png" alt="image-20210906012650334" style="zoom:50%;" />

<img src="img/image-20210906012837910.png" alt="image-20210906012837910" style="zoom:50%;" />

<br>

##### 完整的微服务技术栈可分为

![image-20210906013721203](img/image-20210906013721203.png)

<br>

##### Spring Cloud

微服务作为一种分布式架构方案，需要具体的技术栈落地实现。全球的互联网公司都在积极尝试自己的微服务落地方案。其中在 Java 领域最引人注目的就是 Spring Cloud 提供的方案了。

Spring Cloud 是微服务架构的 **一站式解决方案**，集成了各种优秀微服务功能组件，并基于SpringBoot实现了这些组件的自动装配，从而提供了良好的 **开箱即用** 体验，是目前国内使用最广泛的微服务框架。

###### 官网地址

https://spring.io/projects/spring-cloud

###### 常见的组件包括

<img src="img/image-20210713204155887.png" alt="image-20210713204155887" style="zoom:50%;" />

###### Spring Cloud 与 Spring Boot 的兼容关系

Spring Cloud 底层依赖于 Spring Boot，并且版本的兼容关系：

![image-20210713205003790](img/image-20210713205003790.png)

<br>

##### Spring Cloud Alibaba

Spring Cloud Alibaba 是阿里巴巴提供的微服务开发一站式解决方案，是阿里巴巴开源中间件与 Spring Cloud 体系的融合。

<br>

##### 各种微服务技术框架之间的对比

|                | **Dubbo**           | **Spring Cloud**           | **Spring Cloud Alibaba**   |
| -------------- | ------------------- | -------------------------- | -------------------------- |
| 注册中心       | zookeeper、Redis    | Eureka、Consul             | Nacos、Eureka              |
| 服务远程调用   | Dubbo协议           | Feign（http协议）          | Dubbo、Feign               |
| 配置中心       | 无                  | Spring Cloud Config        | Spring Cloud Config、Nacos |
| 服务网关       | 无                  | Spring Cloud Gateway、Zuul | Spring Cloud Gateway、Zuul |
| 服务监控和保护 | dubbo-admin，功能弱 | Hystix                     | Sentinel                   |

<br>

##### 企业中常见的几种微服务技术框架

###### Spring Cloud + Feign

- 使用 Spring Cloud 技术栈
- 服务接口采用 Restful 风格
- 服务调用采用Feign方式

###### Spring Cloud Alibaba + Feign

- 使用 Spring Cloud Alibaba 技术栈
- 服务接口采用 Restful 风格
- 服务调用采用 Feign 方式

###### Spring Cloud Alibaba + Dubbo

- 使用 Spring Cloud Alibaba技术栈
- 服务接口采用 Dubbo 协议标准
- 服务调用采用 Dubbo 方式

###### Dubbo原始模式

- 基于 Dubbo 老旧技术体系
- 服务接口采用 Dubbo 协议标准
- 服务调用采用 Dubbo 方式

<br>

---

<div STYLE="page-break-after: always;">
    <br>
    <br>
    <br>
    <br>
    <br>
</div>
