# 1	PHP

## 1.1	PHP 概述

##### 什么是 PHP

- PHP*（Hypertext Preprocessor，即超文本预处理器）*是一种通用开源脚本语言[^脚本语言]。

##### PHP 适合做什么

- PHP 主要适用于 Web 开发领域。

##### PHP 的优点

- 

##### PHP 的缺点

- 

---

<br>

## 1.2	PHP 基本概念

##### PHP 脚本

- PHP 脚本以 `<?php` 开始，以 `?>` 结束，可以放在文档中的任何位置。
- PHP 脚本在服务器上执行，然后将纯 HTML 结果发送回浏览器。

##### php 文件

- PHP 文件通常包含 HTML 标签和一些 PHP 脚本代码。PHP 文件的默认文件扩展名是 `.php`。

---

<br>

## 1.3	PHP Hello World

**例**

```php+HTML
<!DOCTYPE html>
<html>
<body>

<h1>My first PHP page</h1>

<?php
echo "Hello World!";
?>

</body>
</html>
```

- 在 Web 服务器的 web 目录中创建 .php 文件即可，服务器将自动解析 php 文件。

---

<br>

# 2	基本语法

## 2.1	PHP 标记

##### 说明

- 当解析一个文件时，PHP 会寻找起始和结束标记，也就是 `<?php` 和 `?>`，这告诉 PHP 开始和停止解析二者之间的代码。
- **该解析方式使得 PHP 可以被嵌入到各种不同的文档中**，而任何起始和结束标记之外的部分都会被 PHP 解析器忽略。

##### PHP 短标记

- 短标记以 `<?` 开始以 `?>` 结束，可以像正常标记一样使用。
- 短标记被默认开启的，但是也可以通过修改配置文件 `short_open_tag php.ini` 禁用。或者在 PHP 安装时使用 --disable-short-tags 配置，将该功能默认禁用。
- 因为短标记可以被禁用，所以建议使用普通标记 (`<?php ?>` 和 `<?= ?>`) 来最大化兼容性。

##### 📌在纯 PHP 代码的文件中不要使用结束标记

- 如果文件内容仅仅包含 PHP 代码，最好在文件末尾删除 PHP 结束标记。这可以避免在 PHP 结束标记之后万一意外加入了空格或者换行符，会导致 PHP 开始输出这些空白。

##### 📌<?php echo 的简写

- `<?php echo` 可以简写为 `<?=`。
- **关闭短标记不会影响到缩写形式 `<?=` **，它总是可用的。

---

<br>

## 2.2	从 HTML 中分离

##### **说明**

- 凡是在一对开始和结束标记之外的内容都会被 PHP 解析器忽略，这使得 PHP 文件可以具备混合内容。 可以使 PHP 嵌入到 HTML 文档中去。
- 但是，**处于条件语句中间时**，此时 PHP 解释器会根据条件判断来决定哪些输出，哪些跳过。

##### 例：使用条件的高级分离

```php+HTML
<?php if ($expression == true): ?>
  This will show if the expression is true.
<?php else: ?>
  Otherwise this will show.
<?php endif; ?>
```

- 上例中 PHP 将跳过条件语句未达成的段落，即使该段落位于 PHP 开始和结束标记之外。

##### 📌更有效率的输出

- 要输出大段文本时，跳出 PHP 解析模式通常比将文本通过 echo 或 print 输出更有效率。

---

<br>

## 2.3	指令分隔符

##### 说明

- PHP 需要在每个语句后用分号结束指令。
- PHP 代码中的结束标记隐含表示了一个分号，因此在一个 PHP 代码段中的最后一行可以不用分号结束。

##### 📌省略文件末尾的结束标记

- 文件末尾的 PHP 代码段结束标记可以省略，有些情况下*（比如使用 include 或者 require 时）*省略掉会更好些。

---

<br>

# 3	数据类型

## 3.0	PHP 数据类型概述

##### PHP 支持 10 种原始数据类型

- **四种标量类型**：
  - bool*（布尔型）*
  - int*（整型）*
  - float*（浮点型，也称作 double*)
  - string*（字符串）*
- **四种复合类型**：
  - array*（数组）*
  - object*（对象）*
  - callable*（可调用）*
  - iterable*（可迭代）*
- **两种特殊类型**：
  - resource*（资源）*
  - NULL*（无类型）*

##### 变量的数据类型

- 变量的类型通常不是由程序员设定的，确切地说，是由 PHP 根据该变量使用的上下文在运行时决定的。
- 变量根据其当时的类型在特定场合下会表现出不同的值。

##### 📌var_dump() 函数

- 如果想查看某个表达式的值和类型，用 `var_dump()` 函数。

##### 📌gettype() 函数

- 如果只是想得到一个易读懂的类型的表达方式用于调试，用 `gettype()` 函数。

##### 📌is_type 函数

- 要检验某个类型，使用 `is_type` 函数

---

<br>

## 3.1	Boolean 布尔类型

忽略

---

<br>

## 3.2	Integer 整型

##### 📌包含下划线的整型

- 从 PHP 7.4.0 开始，整型数值可能会包含下划线 `_`，为了更好的阅读体验，这些下划线在展示的时候，会被 PHP 过滤掉。

---

<br>

## 3.3	Float 浮点类型



---

<br>

## 3.4	String 字符串

##### 说明

- 一个字符串 string 就是由一系列的字符组成，其中每个字符等同于一个字节。这意味着 PHP 只能支持 256 的字符集，因此**不支持 Unicode** 。

##### PHP 字符串的 4 种方式表达形式

- 单引号
- 双引号
- heredoc 语法结构
- nowdoc 语法结构*（自 PHP 5.3.0 起）*

##### 单引号

- 定义一个字符串的最简单的方法是用单引号 `'` 把它包围起来。
- 注意: 不像双引号和 heredoc 语法结构，在单引号字符串中的变量和特殊字符的转义序列将不会被替换。

##### 双引号

- 如果字符串是包围在双引号 `"` 中， PHP 将对一些特殊的字符进行解析

##### Heredoc 结构

- Heredoc 结构就象是没有使用双引号的双引号字符串。

- 在 `<<<` 运算符之后提供一个标识符，然后换行。接下来是字符串 string 本身，最后要用前面定义的标识符作为结束标志。

- 结束时所引用的标识符必须在该行的第一列，而且，标识符的命名也要像其它标签一样遵守 PHP 的规则：只能包含字母、数字和下划线，并且必须以字母和下划线作为开头。

- **例**：

  ```php
  <?php
  $str = <<<EOD
  Example of string
  spanning multiple lines
  using heredoc syntax.
  EOD;
  ```

- 📌**注意**：

  - 在 `heredoc` 结构中单引号不用被转义，但是上文中列出的转义序列还可以使用。变量将被替换，但在 `heredoc` 结构中含有复杂的变量时要格外小心。
  - 结束标识符这行除了可能有一个分号 `;` 外，绝对不能包含其它字符。这意味着标识符不能缩进，分号的前后也不能有任何空白或制表符。更重要的是结束标识符的前面必须是个被本地操作系统认可的换行，比如在 UNIX 和 Mac OS X 系统中是 `\n`，而结束定界符之后也必须紧跟一个换行。
  - 在 PHP 5.3.0 以后，才可以用 `Heredoc` 结构来初始化静态变量和类的属性和常量。

##### Nowdoc 结构

- 就象 `heredoc` 结构类似于双引号字符串，`Nowdoc` 结构是类似于单引号字符串的。
- Nowdoc 结构很像 heredoc 结构，但是 **nowdoc 中不进行解析操作**。这种结构很适合用于嵌入 PHP 代码或其它大段文本而无需对其中的特殊字符进行转义。

##### 📌拼接字符串

- 字符串可以用 `.`*（点）*运算符连接起来，注意 `+`*（加号）*运算符没有这个功能。

---

<br>

## 3.5	数组

##### 说明

- **PHP 中的数组实际上是一个有序映射**。映射是一种把 values 关联到 keys 的类型。此类型在很多方面做了优化，因此可以把它当成真正的数组。  

##### 定义数组

- 可以用 `array()` 来新建一个数组。它接受任意数量用逗号分隔的键值对：

  ```php
  array(  key1 =>  value1,key2 =>  value2, ... ,key_n =>  value_n
  ```

  - 键*（key）*可以是一个整数或字符串。
  - 值*（value）*可以是任意类型的值。

- 📌**注意**：

  - 定义数组时，最后一个数组单元之后的逗号可以省略。但是，**对于多维数组，最好保留最后一个逗号**，这样要添加一个新单元时更方便。
  - 自 5.4 起可以使用短数组定义语法，用 `[]` 替代 `array()`。
  - PHP 数组可以同时含有 integer 和 string 类型的键名，因为 PHP 实际并不区分索引数组和关联数组。

- **例**：

  ```php
  <?php
  $array = array(
      "foo" => "bar",
      "bar" => "foo",
  );
  
  // 自 PHP 5.4 起
  $array = [
      "foo" => "bar",
      "bar" => "foo",
  ];
  ?>
  ```

##### 📌key 的强制类型转换

- 包含有合法整型值的字符串会被转换为整型。*（例如键名 "8" 实际会被储存为 8。但是 "08" 则不会强制转换，因为其不是一个合法的十进制数值）*
- 浮点数也会被转换为整型，并且其小数部分会被舍去。*（例如键名 8.7 实际会被储存为 8）*
- 布尔值也会被转换成整型。即键名 `true` 实际会被储存为 1 而键名 `false` 会被储存为 0。
- Null 会被转换为空字符串，即键名 `null` 实际会被储存为 ""。
- 数组和对象不能被用为键名。坚持这么做会导致警告。

##### 访问和修改数组

- 方括号和花括号都可以用来访问数组单元。

- 通过在方括号内指定键名，可以获取对应的值，并进行修改。

- 可以通过下列形式在数组的最后添加一个新的元素：

  ```php
  <?php
      $array = array()
      $array[] = "new"
  ```

  - 如果给出方括号但没有指定键名，则取当前最大整数索引值，新的键名将是该值加上 1。如果当前还没有整数索引，则键名将为 `0`。

- 📌**注意**：

  - 使用如果数组之前不存在，使用 `$array[key] = value`  的形式会创建一个新的数组。但是，**不推荐这样创建数组**，因为该形式与字符串访问运算符一致，如果存在与 array 同名的字符串，`[]` 会作为 **字符串访问运算符** 使用。
  - 对于字符串形式的键名，访问时必须使用引号。

##### 数组删除

- 通过 `unset()` 函数可以删除数组或数组中指定的键值对，例：

  ```php
  <?php
  $arr = array("Ⅰ" => "one","Ⅱ"=>"two",'Ⅲ'=>'three');
                  
  unset($arr["Ⅰ"]); // This removes the element from the array
  
  unset($arr);    // This deletes the whole array
  ?>
  ```

- 📌**注意**：

  - 数组中的元素被删除后，其最大整数索引的信息会被保留，所以如果使用  `arr[]` 的形式向数组中添加新的值，那么新的值的索引将会是原先存在过的最大整数索引 +1。
  - 删除数组中的元素后，可以使用 `array_values()` 函数重建数字索引。

---

<br>

## 3.6	Iterable 可迭代对象

##### 说明

- `Iterable` 是 PHP 7.1 中引入的一个伪类型。它接受任何 `array` 或实现了 `Traversable` 接口的对象。这些类型都能用 `foreach` 迭代， 也可以和生成器里的 yield from 一起使用。

##### 可迭代对象作为函数参数

- 可迭代对象可以作为函数参数类型使用，表示函数需要一组值。*（此时通常和  foreach 一起使用）*

- **例**：

  ```php
  <?php
  
  function foo(iterable $iterable) {
      foreach ($iterable as $value) {
          // ...
      } 
  }
  
  ?>
  ```

##### 可迭代对象作为返回值类型

- 可迭代对象还可以用作返回值类型，表示函数将返回一个可迭代的值。 

---

<br>

## 3.7	Object 对象

---

<br>

## 3.8

---

<br>



3.x

强制类型转换

如果要将一个变量强制转换为某类型，可以对其使用[强制转换](https://www.php.net/manual/zh/language.types.type-juggling.php#language.types.typecasting)或者 [settype()](https://www.php.net/manual/zh/function.settype.php) 函数。



---



# 附录

##### 最后编辑时间

- 2021/03/03

##### 环境

- php-7.4.15-Win32-vc15-x64
- PhpStorm 2020.3.2

##### 参考资料

- [PHP 手册](https://www.php.net/manual/zh/index.php)

##### 相关资料

- 

##### 脚注

[^脚本语言]: 又称扩建的语言，或动态语言，是一种编程语言，用来控制软件应用程序，脚本通常以文本*（如ASCII)保存，只在被调用时进行解释或编译。

##### 代码链接

[1]: 

##### 锚点

[](#1)

##### 质疑

[^!1]: 

##### 疑问

[^?1]: 

