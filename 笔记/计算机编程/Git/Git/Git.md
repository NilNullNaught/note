# 1	概述

## 1.1	Git

**什么是 Git**

- Git 是一个**开源**的**分布式版本控制工具**，Git被开发出来的初衷是为了更好地管理 Linux 内核，而现在早已被广泛应用于全球各种大中小型项目中。

---

<br>

## 1.2	安装 Git

### 1.2.1	在 Linux 系统上安装 Git[^!1]



---

<br>

### 1.2.2	在 Windows 系统上安装 Git

**步骤**

1. 进入 https://gitforwindows.org/ 下载安装包
2. 使用安装包进行安装

**注意**

- Git 在安装时有大量可配置内容，暂时不清楚作用。

---

<br>

# 2	基础命令

## 2.1	配置身份

**例**

- 打开 Git Bash，输入下列语句：

  ```bash
  git config --global user.name "NNN"
  git config --global user.email "null3519768673@gmail.com"
  ```

- 配置完成后，输入可以输入同样的命令查看是否配置成功，将具体的用户名和邮箱去掉即可：

  ```bash
  git config --global user.name 
  git config --global user.email
  ```
```
  

---

<br>

## 2.2	创建代码仓库

**步骤**

1. 进入需要创建仓库的项目下

2. 输入下列语句：

   ```bash
   git init
   
   
```

3. 输入上述命令后，会在项目的根目录下生成一个隐藏的 .git 目录，这个目录就是来记录本地所有 Git 操作的。

**注意**

- 如果要删除本地仓库，直接删除该目录即可。

---

<br>

## 2.3	提交本地代码

##### 说明

提交代码分为两步，第一步是将代码添加进来，第二部是确认提交。

<br>

##### git add ——添加目录和文件

###### 基本命令

```bash
git add 【完整的文件名/目录名】
```

###### git add . 

`git add .`  会监控工作区的状态树，使用它会把工作时的 **所有变化提交** 到暂存区，包括文件内容修改（modified）以及新文件（new），但不包括被删除的文件。

###### git add -u 

`git add -u` 仅监控 **已经被add的文件**（即 tracked file），他会将被修改的文件提交到暂存区。`git add -u` 不会提交新文件（untracked file），但是会将本地文件的删除与移动提交。

###### git add -A 

是上面两个功能的合集（git add --all的缩写）

<br>

##### 添加当前目录下的所有文件

```bash
git add .
```



**提交代码**

```
git commit -m "【描述信息】"
```

**注意**

- commit 命令的后面，一定要通过 -m 参数加上提交信息，没有描述信息的提交被认为是不合法的。

---

<br>

## 2.4	忽略文件

**Git 文件忽略机制**

- Git 允许用户将指定的文件或目录排除在版本控制之外，它会检查代码仓库的目录下是否存在一个名为 .gitignore 的文件，如果存在，就去一hanghang读取这个文件中的内容，并把每一行指定的文件或目录排除在版本控制之外。

---

<br>

## 2.5	使用 Git 查看自上次提交后文件修改的内容

**查看项目从上次提交后文件修改的内容**

```bash
git status
```

**查看项目更改的具体内容**

```bash
git diff
```

- 最左侧的加号表示新添加的内容，如果有删除的内容的话，会在最左侧用减号表示。

---

<br>

## 2.6	撤销未提交的修改

**命令**

```bash
git checkout 【路径或文件名】
```

**注意**

- 这种撤销只适用于还没有执行过 add 命令的文件，如果某个文件已经被添加过了，必须先取消添加，再进行提交

  ```bash
  #取消添加命令
  git reset 【路径或文件名】
  ```

---

<br>

## 2.7	查看提交记录

**查看所有的提交记录**

```bash
git log
```

**查看指定 id 的记录**

```bash
git log 【记录 id】
```

**查看最近一次的提交记录**

```bash
git log -1
```

---

<br>

# 3	高级用法

## 3.1	分支

**什么是分支**

- 分支是版本控制工具中比较高级且比较重要的一个概念，它主要的作用就是在现有代码的基础上开辟一个分叉口，**使得代码可以在主干线和分支线上同时进行开发，且相互之间不会影响**。

**分支的应用场景**

1. 比如说你们公司研发了一款不错的软件，最近刚刚完成，并推出了1.0版本。但是领导是不会让你们闲着的，马上提出了新的需求，让你们投入到1.1版本的开发工作当中。过了几个星期，1.1版本的功能已经完成了一半，但是这个时候突然有用户反馈，之前上线的1.0版本发现了几个重大的bug，严重影响软件的正常使用。领导也相当重视这个问题，要求你们立刻修复这些bug，并对1.0版本进行更新，但这个时候你就非常为难了，你会发现根本没法去修复。因为现在1.1版本已经开发一半了，如果在现有代码的基础上修复这些bug，那么更新的1.0版本将会带有一半1.1版本的功能。

   使用分支的话，只需要在发布1.0版本的时候建立一个分支，然后在主干线上继续开发1.1版本的功能。当在1.0版本上发现任何bug的时候，就在分支线上进行修改，然后发布新的1.0版本，并记得将修改后的代码合并到主干线上。这样的话，不仅可以轻松解决1.0版本存在的bug，而且保证了主干线上的代码也已经修复了这些bug，当1.1版本发布时，就不会有同样的bug存在了。

**master**

- 创建 git 仓库后，git 默认的主要分支名为 master。

**查看所有分支**

```
//输入 git branch 可以查看所有分支
//使用 bash 命令查看所有分支，当前分支会以颜色标记，并在前面显示 * 号
git branch
```

**创建分支**

```bash
//基于当前分支，创建一个名为 version1.0 的分支
git branch version1.0
```

**切换分支**

```bash
git checkout version1.0
```

**合并操作**

- 在version1.0分支上修改并提交的代码将不会影响到master分支。同样的道理，在master分支上修改并提交的代码也不会影响到version1.0分支。

  因此，如果我们在version1.0分支上修复了一个bug，在master分支上这个bug仍然是存在的。

  这时将修改的代码一行行复制到master分支上显然不是一种聪明的做法，最好的办法就是使用`merge`命令来完成合并操作

```bash
//切换到 master 分支
git checkout master
//将 master 分支与 version 1.0 分支合并
git merge version1.0
```

**删除分支**

```bash
//删除 version1.0 分支
git branch -D version1.0
```

---

<br>

## 3.2	与远程版本库协作

> 所有版本控制工具最重要的一个特点就是可以使用它来进行 **团队合作开发**。每个人的电脑上都会有一份代码，当团队的某个成员在自己的电脑上编写完成了某个功能后，就将代码提交到服务器，其他的成员只需要将服务器上的代码同步到本地，就能保证整个团队所有人的代码都相同。这样的话，每个团队成员就可以各司其职，大家共同来完成一个较为庞大的项目。

**将远程版本库的代码下载到本地**

```bash
//远程版本库的 Git 地址是 https://github.com/example/test.git
git clone https://github.com/example/test.git
```

**把本地修改的内容同步到远程版本库上**

```bash
//origin 部分指定的是远程版本库的 Git 地址，master 部分指定的是同步到哪一个分支上
git push origin master

//上述命令将本地代码同步到 https://github.com/example/test.git 这个版本库的 master 分支上
```

**使用 fetch 将远程版本库上的修改同步到本地**

```bash
git fetch origin master

//注意，fetch 同步下来的代码并不会合并到任何分支上，而是会存放到一个 origin/master 分支上
//需要之后再 merge 命令将 origin/master分 支上的修改合并到主分支上
```

**使用 pull 将远程版本库上的修改同步到本地**

```
//pull 命令相当于将 fetch 和 merge 这两个命令一起执行，它可以从远程版本库上获取最新的代码并且合并到本地
git pull origin master
```

---

<br>


## 3.3	版本回退

### 3.3.0

##### 版本回退的前提

- 版本回退通过 `git reset` 命令进行，需要指定的 `commit id`（即版本号）。所以需要先通过 `git log` 命令查询 `commit id`。

---

<br>

### 3.3.1	使用 reset 进行版本回退

##### 回退到当前版本的上一个版本

- ###### 命令

  ```php
  git reset --hard HEAD
  ```

<br>

##### 回退到指定的版本

- ###### 命令

  ```
  git reset --hard [commit id]
  ```

<br>

##### 回退到指定版本的上一个版本或前几个版本

- ###### 命令

  ```
  //回退到指定版本的上一个版本
  git reset --hard [commit id]^
  
  //回退到指定版本的前一个版本
  git reset --hard [commit id]^^
  
  //回退到指定版本的前 10 个版本
  git reset --hard [commit id]^^^^^^^^^^
  
  //回退到指定版本的前 10 个版本
  git reset --hard [commit id]~10
  ```

- ###### 回退符 ^

  `^` 用于指定返回的版本，有几个 `^` 则跳跃到几个版本之前，如果需要回退的版本太远，可以使用 `~n` 的形式 代替 `^`。

<br>

##### 📌使用 git reset 进行版本回退会导致跳跃版本之后的所有版本消失。

---

<br>

### 3.3.2	使用 revert 进行版本回退（未完成）



---

<br>

# 附录

##### 最后编辑时间

- 2021/03/06

##### 环境

- 

##### 参考

- 

##### 相关资料

- 

##### 脚注

[^xxx]: 

##### 代码链接

[1]:

##### 锚点

[](#1) 

##### 质疑

[^!1]: 

##### 疑问

[^?1]: 

