# 1	概述

1.1	

##### Linux 简介

##### Linux arch

---





## 1.2	基本概念

### 1.2.1	命令参数

---

<br>

### 1.2.2	目录结构

##### 树状目录结构

![img](img/d0c50-linux2bfile2bsystem2bhierarchy.jpg)

<br>

##### `/` 目录

`/` 目录是Linux的根目录。

##### `~` 目录

`~` 目录 又叫 **家目录**，Linux 是多用户操作系统，可以同时有多个用户对同一台 Linux 主机进行操作，`~` 目录代表各个用户的个人目录，`~` 目录的实际目录是 `/home/用户名`。

root 用户的 `~` 目录 的实际目录 `/home`

##### 说明

- **/bin**：
  bin 是 Binaries (二进制文件) 的缩写, 这个目录存放着最经常使用的命令。

- **/boot：**
  这里存放的是启动 Linux 时使用的一些核心文件，包括一些连接文件以及镜像文件。

- **/dev ：**
  dev 是 Device(设备) 的缩写, 该目录下存放的是 Linux 的外部设备，在 Linux 中访问设备的方式和访问文件的方式是相同的。

- **/etc：**
  etc 是 Etcetera(等等) 的缩写,这个目录用来存放所有的系统管理所需要的配置文件和子目录。

- **/home**：
  用户的主目录，在 Linux 中，每个用户都有一个自己的目录，一般该目录名是以用户的账号命名的，如上图中的 alice、bob 和 eve。

- **/lib**：
  lib 是 Library(库) 的缩写这个目录里存放着系统最基本的动态连接共享库，其作用类似于 Windows 里的 DLL 文件。几乎所有的应用程序都需要用到这些共享库。

- **/lost+found**：
  这个目录一般情况下是空的，当系统非法关机后，这里就存放了一些文件。

- **/media**：
  linux 系统会自动识别一些设备，例如U盘、光驱等等，当识别后，Linux 会把识别的设备挂载到这个目录下。

- **/mnt**：
  系统提供该目录是为了让用户临时挂载别的文件系统的，我们可以将光驱挂载在 /mnt/ 上，然后进入该目录就可以查看光驱里的内容了。

- **/opt**：
  opt 是 optional(可选) 的缩写，这是给主机额外安装软件所摆放的目录。比如你安装一个ORACLE数据库则就可以放到这个目录下。默认是空的。

- **/proc**：
  proc 是 Processes(进程) 的缩写，/proc 是一种伪文件系统（也即虚拟文件系统），存储的是当前内核运行状态的一系列特殊文件，这个目录是一个虚拟的目录，它是系统内存的映射，我们可以通过直接访问这个目录来获取系统信息。
  这个目录的内容不在硬盘上而是在内存里，我们也可以直接修改里面的某些文件，比如可以通过下面的命令来屏蔽主机的ping命令，使别人无法ping你的机器：

  ```
  echo 1 > /proc/sys/net/ipv4/icmp_echo_ignore_all
  ```

- **/root**：
  该目录为系统管理员，也称作超级权限者的用户主目录。

- **/sbin**：
  s 就是 Super User 的意思，是 Superuser Binaries (超级用户的二进制文件) 的缩写，这里存放的是系统管理员使用的系统管理程序。

- **/selinux**：
   这个目录是 Redhat/CentOS 所特有的目录，Selinux 是一个安全机制，类似于 windows 的防火墙，但是这套机制比较复杂，这个目录就是存放selinux相关的文件的。

- **/srv**：
   该目录存放一些服务启动之后需要提取的数据。

- **/sys**：

  这是 Linux2.6 内核的一个很大的变化。该目录下安装了 2.6 内核中新出现的一个文件系统 sysfs 。

  sysfs 文件系统集成了下面3种文件系统的信息：针对进程信息的 proc 文件系统、针对设备的 devfs 文件系统以及针对伪终端的 devpts 文件系统。

  该文件系统是内核设备树的一个直观反映。

  当一个内核对象被创建的时候，对应的文件和目录也在内核对象子系统中被创建。

- **/tmp**：
  tmp 是 temporary(临时) 的缩写这个目录是用来存放一些临时文件的。

- **/usr**：
   usr 是 unix shared resources(共享资源) 的缩写，这是一个非常重要的目录，用户的很多应用程序和文件都放在这个目录下，类似于 windows 下的 program files 目录。

- **/usr/bin：**
  系统用户使用的应用程序。

- **/usr/sbin：**
  超级用户使用的比较高级的管理程序和系统守护程序。

- **/usr/src：**
  内核源代码默认的放置目录。

- **/var**：
  var 是 variable(变量) 的缩写，这个目录中存放着在不断扩充着的东西，我们习惯将那些经常被修改的目录放在这个目录下。包括各种日志文件。

- **/run**：
  是一个临时文件系统，存储系统启动以来的信息。当系统重启时，这个目录下的文件应该被删掉或清除。如果你的系统上有 /var/run 目录，应该让它指向 run。

---

<br>

# 2	环境配置

## 2.1	安装 JDK

### 2.1.1	yum安装

**步骤**

1. 查询需要安装的 JDK 版本

   ```
   yum -y list java*
   ```

2. 安装jdk1.8

   ```
   yum install -y java-1.8.0-openjdk.x86_64
   ```

3. 配置环境变量

```
vi /etc/profile
```

```
#set java environment
JAVA_HOME=/usr/lib/jvm/java-11-openjdk-11.0.14.1.1-1.el7_9.x86_64
JRE_HOME=$JAVA_HOME
CLASS_PATH=.:$JRE_HOME/lib
PATH=$PATH:$JAVA_HOME/bin
export JAVA_HOME JRE_HOME CLASS_PATH PATH
```

4. 让修改生效

```
source /etc/profile
```



---

<br>

## 2.2	安装 Docker

---

<br>

# 3	基本命令

## 3.1	ls——查看指定工作目录下的内容

##### 说明

- ls（list files）命令用于显示指定工作目录下的内容（列出目前工作目录所含之文件及子目录)。

##### ls 命令参数

| 参数 | 说明                                                         |
| ---- | ------------------------------------------------------------ |
|      |                                                              |
| -a   | 列出目录所有文件，包含以 `.` 开始的隐藏文件                  |
| -A   | 列出除 `.` 及 `..` 外的其它文件                              |
|      |                                                              |
| -r   | 反序排列                                                     |
| -t   | 以文件修改时间排序                                           |
| -S   | 以文件大小排序                                               |
|      |                                                              |
| -h   | 以易读大小显示                                               |
|      |                                                              |
| -l   | 除了文件名之外，还将文件的权限、所有者、文件大小等信息详细列出来 |

#####  例

- 按易读方式按时间反序排序，并显示文件详细信息：

  ```sh
  ls -lhrt
  ```

- 按大小反序显示文件详细信息：

  ```shell
  ls -lrS
  ```

- 列出当前目录中所有以"t"开头的目录的详细内容

  ```sh
  ls -l t*
  ```

- 列出文件绝对路径（不包含隐藏文件）

  ```shell
  ls | sed "s:^:`pwd`/:"
  ```

- 列出文件绝对路径（包含隐藏文件）

  ```shell
  find $pwd -maxdepth 1 | xargs ls -ld
  ```

---

<br>

## 3.2	cd——进入目录

##### 说明

- cd 即 changeDirectory，该命令用于切换目录。

##### 例

- 进入根目录

  ```sh
  cd /
  ```

- 进入 "home" 目录

  ```shell
  //注意，root 权限用户使用该命令会进入 root 目录
  cd ~
  ```

- 进入上一次工作路径

  ```shell
  cd -
  ```

- 把上个命令的参数作为 cd 命令的参数使用。

  ```
  cd !$
  ```
  
- 进入上一级目录

  ```
  cd ..
  ```

  

---

<br>

## 3.3	pwd——显示工作目录

##### 说明

- 执行 pwd 指令可立刻得知您目前所在的工作目录的绝对路径名称。

##### 例

- 查看当前路径

  ```shell
  pwd
  ```

- 查看软链接的实际路径

  ```shell
  pwd -P
  ```

---

<br>

## 3.4	mkdir——创建文件夹

##### 说明

- mkdir（make directory）命令用于创建目录

##### 参数

| 参数 | 说明                                                         |
| ---- | ------------------------------------------------------------ |
| -m   | 对新建目录设置存取权限，也可以用 chmod 命令设置;             |
| -p   | 可以是一个路径名称。<br>此时若路径中的某些目录尚不存在，加上此选项后，系统将自动建立好那些尚不在的目录，即一次可以建立多个目录。 |

##### 例

- 当前工作目录下创建名为 t 的文件夹

  ```shell
  mkdir t
  ```

- 在 tmp 目录下创建路径为 test/t1/t 的目录，若不存在，则创建：

  ```shell
  mkdir -p /tmp/test/t1/t
  ```

---

<br>

## 3.5	rm——删除文件或文件夹命令

##### 说明

- rm（remove）命令用于删除一个文件或者目录。
- 如果没有使用 -r 选项，则 rm 不会删除目录。
- 如果使用 rm 来删除文件，通常仍可以将该文件恢复原状。

##### 例

- 删除任何 .log 文件，删除前逐一询问确认：

  ```shell
  rm -i *.log
  ```

- 删除 test 子目录及子目录中所有档案删除，并且不用一一确认：

  ```shell
  rm -rf test
  ```

- 删除以 -f 开头的文件

  ```shell
  rm -- -f*
  ```
  
- 删除当前目录下的所有文件

  ```shell
  rm -f *
  ```

- 删除当前目录下的所有文件和文件夹

  ```shell
  rm -rf *
  ```

  <br>

---

<br>

## 3.6	rmdir——删除目录命令

##### 说明

- rmdir（remove directory）命令从一个目录中删除一个或多个空的子目录项。

### 语法

```
rmdir [-p] dirName
```

##### 参数

- -p 是当子目录被删除后使它也成为空目录的话，则顺便一并删除。

##### 例

- 将工作目录下，名为 AAA 的目录删除 :

  ```
  rmdir AAA
  ```

- 在工作目录下的 BBB 目录中，删除名为 Test 的rf目录。若 Test 删除后，BBB 目录成为空目录，则 BBB 亦予删除。

  ```
  rmdir -p BBB/Test
  ```
---
<br>

## 3.7	mv——改名或移动位置

##### 说明

- mv（move file）命令用于为文件或目录改名、或将文件或目录移入其它位置。

##### 语法

```
mv [options] source dest
mv [options] source... directory
```

##### 参数说明

- **-b**: 当目标文件或目录存在时，在执行覆盖前，会为其创建一个备份。
- **-i**: 如果指定移动的源目录或文件与目标的目录或文件同名，则会先询问是否覆盖旧文件，输入 y 表示直接覆盖，输入 n 表示取消该操作。
- **-f**: 如果指定移动的源目录或文件与目标的目录或文件同名，不会询问，直接覆盖旧文件。
- **-n**: 不要覆盖任何已存在的文件或目录。
- **-u**：当源文件比目标文件新或者目标文件不存在时，才执行移动操作。

例：

将文件 aaa 改名为 bbb :

```
mv aaa bbb
```

将 info 目录放入 logs 目录中。注意，如果 logs 目录不存在，则该命令将 info 改名为 logs。

```
mv info/ logs 
```

再如将 **/usr/runoob** 下的所有文件和目录移到当前目录下，命令行为：

```
$ mv /usr/runoob/*  . 
```

---

<br>

## 3.8	cp——复制命令

##### 说明

- cp（copy file）命令主要用于复制文件或目录。

##### 参数说明

- -a：此选项通常在复制目录时使用，它保留链接、文件属性，并复制目录下的所有内容。其作用等于dpR参数组合。
- -d：复制时保留链接。这里所说的链接相当于Windows系统中的快捷方式。
- -f：覆盖已经存在的目标文件而不给出提示。
- -i：与-f选项相反，在覆盖目标文件之前给出提示，要求用户确认是否覆盖，回答"y"时目标文件将被覆盖。
- -p：除复制文件的内容外，还把修改时间和访问权限也复制到新文件中。
- -r：若给出的源文件是一个目录文件，此时将复制该目录下所有的子目录和文件。
- -l：不复制文件，只是生成链接文件。

##### 实例

- 使用指令 **cp** 将当前目录 **test/** 下的所有文件复制到新目录 **newtest** 下，输入如下命令：

  ```shell
  $ cp –r test/ newtest 
  ```

---

<br>

## 3.9	vim 修改文件

基本上 vi/vim 共分为三种模式，分别是**命令模式（Command mode）**，**输入模式（Insert mode）**和**底线命令模式（Last line mode）**。 



##### 命令模式：

用户刚刚启动 vi/vim，便进入了命令模式。

此状态下敲击键盘动作会被Vim识别为**命令**，而非输入字符。比如我们此时按下i，并不会输入一个字符，i被当作了一个命令。

以下是常用的几个命令：

- **i** 切换到输入模式，以输入字符。
- **x** 删除当前光标所在处的字符。
- **:** 切换到底线命令模式，以在最底一行输入命令。

若想要编辑文本：启动Vim，进入了命令模式，按下i，切换到输入模式。

命令模式只有一些最基本的命令，因此仍要依靠底线命令模式输入更多命令。



##### 输入模式

在命令模式下按下i就进入了输入模式。

在输入模式中，可以使用以下按键：

- **字符按键以及Shift组合**，输入字符
- **ENTER**，回车键，换行
- **BACK SPACE**，退格键，删除光标前一个字符
- **DEL**，删除键，删除光标后一个字符
- **方向键**，在文本中移动光标
- **HOME**/**END**，移动光标到行首/行尾
- **Page Up**/**Page Down**，上/下翻页
- **Insert**，切换光标为输入/替换模式，光标将变成竖线/下划线
- **ESC**，退出输入模式，切换到命令模式



##### 底线命令模式

在命令模式下按下:（英文冒号）就进入了底线命令模式。

底线命令模式可以输入单个或多个字符的命令，可用的命令非常多。

在底线命令模式中，基本的命令有（已经省略了冒号）：

- q 退出程序
- w 保存文件 

修改完成后同时使用上述两个命令，保存并推出

按 ESC 键可随时退出底线命令模式。





---

<br>

# 4	扩展命令

## 4.1	tree

##### 安装 tree 命令组件

```
yum install tree
```

<br>

##### 基本使用

```sh
tree
```

- 说明：不添加任何参数，直接输入 `tree` 命令。
- 效果：以树状图列出当前目录结构。

<br>

**参数说明**：

- -a 显示所有文件和目录。
- -A 使用ASNI绘图字符显示树状图而非以ASCII字符组合。
- -C 在文件和目录清单加上色彩，便于区分各种类型。
- -d 显示目录名称而你非内容。
- -D 列出文件或目录的更改时间。
- -f 在每个文件或目录之前，显示完整的相对路径名称。
- -F 在执行文件，目录，Socket，符号连接，管道名称名称，各自加上"*","/","=","@","|"号。
- -g 列出文件或目录的所属群组名称，没有对应的名称时，则显示群组识别码。
- -i 不以阶梯状列出文件或目录名称。
- -L level 限制目录显示层级。
- -l 如遇到性质为符号连接的目录，直接列出该连接所指向的原始目录。
- -n 不在文件和目录清单加上色彩。
- -N 直接列出文件和目录名称，包括控制字符。
- -p 列出权限标示。
- -P<范本样式> 只显示符合范本样式的文件或目录名称。
- -q 用"?"号取代控制字符，列出文件和目录名称。
- -s 列出文件或目录大小。
- -t 用文件和目录的更改时间排序。
- -u 列出文件或目录的拥有者名称，没有对应的名称时，则显示用户识别码。
- -x 将范围局限在现行的文件系统中，若指定目录下的某些子目录，其存放于另一个文件系统上，则将该子目录予以排除在寻找范围外。

----





# X

## X.1	Linux 文件传输	

##### PSCP

PSCP (PuTTY Secure Copy client)是 PuTTY 提供的文件传输工具 ，通过 SSH 连接，在两台机器之间安全的传输文件，可以用于任何 SSH（包括 SSH v1、SSH v2） 服务器。

<br>

##### 使用步骤

1. 将 putty 的 pscp.exe 放到 C:\Windows\System32 下
2. 在 dos 下输入 pscp 会出现相关命令提示

![](img/QQ%E6%88%AA%E5%9B%BE20210930193301.png)

<br>

##### 列出远程 linux 主机 /home下的目录和文件

```shell
pscp -l [用户名] -pw [密码] -ls [IP 地址]:/home
```

<br>

##### 将本地文件传输到远程 Linux 主机的 /home目录下

###### 使用密码传输

```shell
pscp -l [用户名] -pw [密码] [文件名] [IP 地址]:/home
```

###### 使用密钥传输

```
pscp -l [用户名] -i [密钥位置] [文件名] [IP 地址]:/home
```

例

```
pscp -l root -i D:\kits\PuTTY\key\key.ppk NNNnoteService222.tar.gz 8.131.72.52:/home
```

###### 注意

传输文件位置应是 **绝对位置** 或者与 PowerShell 当前位置相同。

<br>

##### 将远程的 /home/1.sql 拷贝到 D 盘并改名

```shell
pscp -l [用户名] -pw [密码]  [IP 地址]:/home  d:\2.sql
```

例

```
pscp -l root -i D:\kits\PuTTY\key\key.ppk 8.131.72.52:/etc/my.c my.cnf
```

<br>

##### 📌文件只能上传到家目录的 /home 目录下，原因未知。

<br>

---

<br>

## X.2	远程服务器访问

##### 阿里云开启密钥访问

1. 在云服务器管理控制台中选择 **网络与安全** → **密钥对**
2. 创建密钥对并绑定实例。
3. 在云服务器管理控制台中选择 **网络与安全** → **安全组**，配置安全组规则，开启 22 端口 SSH 访问。*（如果已经开启 SSH 访问，可以跳过这一步）*
4. 重启服务器。
5. 下载 `.pem` 密钥对文件，使用 SSH 连接工具连接远程服务器。

##### 禁用密码登录远程服务器

- vim /etc/ssh/sshd_config  *(注意，不是 ssh_config，是 sshd_config)*：

  ```php
  AuthorizedKeysFile   .ssh/authorized_keys   //公钥公钥认证文件
  
  PubkeyAuthentication yes   //可以使用公钥登录
  
  PasswordAuthentication no  //不允许使用密码登录
  ```

##### 📌不要轻易开启 22 号端口

- 22 号端口极易受到攻击，只有配置了密匙登陆，并且禁用了密码登陆的情况下才可以开启 22 号端口。

---

<br>

## X.3	查询进程并关闭

##### 查询进程

```
ps -ef|grep 【进程名】
```

<br>

##### 关闭进程

```
kill -9 【进程号】
```

<br>

---



# 附录

##### 最后编辑时间

- 2021/03/06

##### 环境

- centOS 7.3

##### 参考

- 

##### 相关资料

- 

##### 脚注

[^]: 

##### 代码链接

[1]:

##### 锚点

[](#1) 

##### 质疑

[^!1]: 

##### 疑问

[^?1]: 
